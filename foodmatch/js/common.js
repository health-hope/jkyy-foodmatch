"use strict";var randomString=function(e){e=e||32;for(var t="abcdefhijkmnprstwxyz012345678",n=t.length,o="",a=0;a<e;a++)o+=t.charAt(Math.floor(Math.random()*n));return o},formatDate=function(e,t){var n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var o in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+o+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?n[o]:("00"+n[o]).substr((""+n[o]).length)));return e},CONFIG={baseUrl:"//api.hbox.jiankangyouyi.com/ego-gw"};function isEmpty(e){return void 0===e||null==e||0==e.length}function showLoading(){$(".loading").show()}function hideLoading(){$(".loading").fadeOut()}function showTip(e){$("body").css("display","block"),$(".tip p").html(e),$(".tip").show(),$(".tip .tipBox").removeClass("fadeOutUp").addClass("fadeInDown").show(),setTimeout(function(){$(".tip .tipBox").removeClass("fadeInDown").addClass("fadeOutUp"),setTimeout(function(){$(".tip").fadeOut()},800)},2e3)}function getUrlParam(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(t);return null!=n?unescape(n[2]):null}function ajaxRequest(n,o,a,r){var i=getUrlParam("foodMatchtype")||parseInt(JSON.parse(window.localStorage.getItem("foodMatchtype"))),e=window.sessionStorage.getItem("token");if(e){s=randomString(32),c=formatDate("yyyy-MM-dd hh:mm:ss",new Date);(t={appId:config.appId,version:config.version,timestamp:c,nonceStr:s}).reqData=a,$.ajax({headers:{token:e},url:""+CONFIG.baseUrl+n+"?foodMatchtype="+i,type:o,data:JSON.stringify(t),dataType:"json",contentType:"application/json;charset=utf-8",success:function(e){var t=e.resData;"SUCCESS"!=JSON.parse(t).retCode&&showTip(JSON.parse(t).retInfo||JSON.parse(t).tooltip),console.log("response："+t),r(JSON.parse(t))},error:function(e){console.log(e)}})}else if(""!=config.privateKey){var t,s=randomString(32),c=formatDate("yyyy-MM-dd hh:mm:ss",new Date),l=doSign("appId="+config.appId+"&nonceStr="+s+"&timestamp="+c+"&version="+config.version,"-----BEGIN PRIVATE KEY-----"+config.privateKey+"-----END PRIVATE KEY-----","sha256");(t={appId:config.appId,version:config.version,timestamp:c,nonceStr:s,sign:l}).reqData=a,$.ajax({url:""+CONFIG.baseUrl+n+"?foodMatchtype="+i,type:o,data:JSON.stringify(t),dataType:"json",contentType:"application/json;charset=utf-8",success:function(e){var t=e.resData;"SUCCESS"!=JSON.parse(t).retCode&&showTip(JSON.parse(t).retInfo||JSON.parse(t).tooltip),console.log("response："+t),r(JSON.parse(t))},error:function(e){console.log(e)}})}else""!=config.signUrl?$.get(config.signUrl,function(e){if(e){var t=e;t.reqData=a,$.ajax({url:""+CONFIG.baseUrl+n+"?foodMatchtype="+i,type:o,data:JSON.stringify(t),dataType:"json",contentType:"application/json;charset=utf-8",success:function(e){var t=e.resData;"SUCCESS"!=JSON.parse(t).retCode&&showTip(JSON.parse(t).retInfo||JSON.parse(t).tooltip),r(JSON.parse(t))},error:function(e){console.log(e)}})}else showTip("请检查签名")}):showTip("请检查签名或配置token")}function getStore(e){if(e){var t=window.localStorage.getItem(e);return null!=t?t:null}}function setStore(e,t){e&&("string"!=typeof t&&(t=JSON.stringify(t)),window.localStorage.setItem(e,t))}function delStore(e){e&&window.localStorage.removeItem(e)}function getStrLength(e){var t=e.match(/[^\x00-\xff]/gi);return e.length+(null==t?0:t.length)}function birthdayToAge(e){var t=new Date(e.replace(/-/g,"/")),n=new Date,o=new Date(n.getFullYear(),t.getMonth(),t.getDate()),a=(new Date).getFullYear()-t.getFullYear()-1;return o<n&&(a+=1),a}function toScrollTop(){var t=document.documentElement.scrollTop||document.body.scrollTop,n=t/50;!function e(){0<t&&(t-=n,window.scrollTo(0,t),setTimeout(e,10))}()}function doSign(e,t,n){var o,a=new RSAKey;n=n||"sha256";return(a=KEYUTIL.getKey(t)).signString?(o=a.signString(e,n),o=hex2b64(o)):a.sign&&(o=a.sign(e,n),o=hex2b64(o)),o}function dynmicLoadCss(e,t){if(!e||0===e.length)throw new Error("加载css样式表链接不能为空");if(1<t)for(var n=0;n<t;n++)console.log(e[n]),o(e[n]);else o(e);function o(e){var t=document.getElementsByTagName("head")[0],n=document.createElement("link");n.href="../css/common/"+e+".css",n.rel="stylesheet",n.type="text/css",t.appendChild(n)}}function _debounce(n,e){var o=e||1e3,a=void 0;return function(){var e=this,t=arguments;a&&clearTimeout(a),a=setTimeout(function(){a=null,n.apply(e,t)},o)}}!function(){function e(){var e=document.documentElement,t=e.clientWidth;800<t&&(t=800),e.style.fontSize=t/18.75+"px"}e(),window.addEventListener("resize",e,!1),window.addEventListener("orientationchange",e,!1)}(),$(".loading").on("touchmove",function(e){e.preventDefault?e.preventDefault():window.event.returnValue=!1}),$(".toast").on("touchmove",function(e){e.preventDefault?e.preventDefault():window.event.returnValue=!1}),$(".tip").on("touchmove",function(e){e.preventDefault?e.preventDefault():window.event.returnValue=!1}),"0"===config.theme?dynmicLoadCss(["color_init_style"],"1"):"1"===config.theme?dynmicLoadCss(["color_green_style"],"1"):"2"===config.theme?dynmicLoadCss(["color_blue_style"],"1"):"3"===config.theme?dynmicLoadCss(["color_red_style"],"1"):"4"===config.theme&&dynmicLoadCss(["color_black_style"],"1");