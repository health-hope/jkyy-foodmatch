"use strict";var openIdItem=window.localStorage.getItem("openIdItem")||"",foodMatchtype=window.localStorage.getItem("foodMatchtype")||"",foodMatchChannel=window.localStorage.getItem("foodMatchChannel")||"";new Vue({el:"#containerBox",data:{energyRatio:{},isActive:!1,recipesInfo:{},dietPrincipleDetl:[],isShowBox:!1,dateRangeStart:"",dateRangeEnd:"",breakfast:{},breakfastAddition:{},lunch:{},lunchAddition:{},dinner:{},dinnerAddition:{},openIdItem:openIdItem,isCreated:"",isClickDiet:!1,clickData:getUrlParam("recipesDate")||"",recipesId:getUrlParam("recipesId")||"",actIdx:0,animateIndex:"",typeString:"",changeImgIndex:"",isAddMeals:!1},mounted:function(){this.$nextTick(function(){isEmpty(openIdItem)?showTip("id不能为空"):(window.localStorage.setItem("openIdItem",openIdItem),this.initData())})},filters:{fomatDateHZ:function(e){var t=new Date(e);return t.getMonth()+1+"月"+t.getDate()+"日"}},methods:{weekDietXq:function(e,t,o,i){var n=this;n.actIdx=i,n.clickData=t;var a={type:JSON.parse(foodMatchtype),openId:JSON.parse(o),recipesDate:t,recipesId:e};ajaxRequest("/v2/food/matching/diet/detail/query.do","POST",a,function(e){"SUCCESS"==e.retCode?(hideLoading(),n.breakfast=e.breakfast||{},n.breakfastAddition=e.breakfastAddition||{},n.lunch=e.lunch||{},n.lunchAddition=e.lunchAddition||{},n.dinner=e.dinner||{},n.dinnerAddition=e.dinnerAddition||{},"{}"==JSON.stringify(n.breakfastAddition)&&"{}"==JSON.stringify(n.lunchAddition)&&"{}"==JSON.stringify(n.dinnerAddition)?n.isAddMeals=!0:n.isAddMeals=!1):showTip(e.tooltip)})},estimate:function(){window.open("estimate.html")},changeRecipe:_debounce(function(i,e,n,t){var a=this;a.changeImgIndex=t,setTimeout(function(){a.changeImgIndex=""},300),a.animateIndex=t,a.typeString=n;var o={recipesDate:a.clickData,recipesId:a.recipesId,foodName:i.foodName,foodHeat:i.foodHeat,openId:openIdItem,mealType:e,foodId:i.foodId},d={type:JSON.parse(foodMatchtype),openId:openIdItem};Object.assign(d,o),d.openId=JSON.parse(d.openId),ajaxRequest("/v2/food/matching/diet/changement/query.do","POST",d,function(e){if(console.log(e,"datashiwu"),"SUCCESS"==e.retCode){hideLoading();for(var t=Object.keys(e.foodInfo),o=0;o<t.length;o++)i[t[o]]=e.foodInfo[t[o]];a[n].heat=e.mealHeat,a.animateIndex="",a.typeString="",console.log(a[n])}else showTip(e.tooltip)})},500),initData:function(){var n=this;if(n.isCreated=window.localStorage.getItem("isCreated")||"",isEmpty(foodMatchChannel))var e={type:JSON.parse(foodMatchtype),openId:JSON.parse(openIdItem),isCreated:n.isCreated};else e={type:JSON.parse(foodMatchtype),openId:JSON.parse(openIdItem),isCreated:n.isCreated,foodMatchChannel:JSON.parse(foodMatchChannel)};ajaxRequest("/v2/food/matching/diet/recommendation/query.do","POST",e,function(e){if(console.log(e,"datashiwu"),"SUCCESS"==e.retCode){hideLoading(),n.recipesInfo=e.recipesInfo,n.recipesId=e.recipesInfo.recipesId,n.dateRangeStart=n.recipesInfo.dateRangeStart,n.dateRangeEnd=n.recipesInfo.dateRangeEnd,n.dietPrincipleDetl=e.dietPrinciple.dietPrincipleDetl;for(var t=0,o=0;o<e.recipesInfo.recipes.length;o++)"2"==e.recipesInfo.recipes[o].isCurDay&&(t=o);n.actIdx=t;var i=e.recipesInfo.recipes[n.actIdx].recipesDate;n.weekDietXq(n.recipesId,i,openIdItem)}else showTip(e.tooltip)})},backs:function(){window.localStorage.getItem("peicaned")?isEmpty(foodMatchChannel)?window.location.href="../index.html?openIdItem="+JSON.parse(openIdItem)+"&foodMatchtype="+JSON.parse(foodMatchtype)+"&twojoin=2":window.location.href="../index.html?openIdItem="+JSON.parse(openIdItem)+"&foodMatchtype="+JSON.parse(foodMatchtype)+"&twojoin=2&foodMatchChannel="+JSON.parse(foodMatchChannel):window.location.href="reference.html"},currentMaterial:function(){window.open("todayfood.html?recipesId="+this.recipesId+"&recipesDate="+this.clickData)},reference:function(){window.location.href="reference.html"},shutDown:function(){this.isShowBox=!1},sure:function(){var e=this;e.isShowBox=!1,showLoading(),e.isCreated=1,window.localStorage.setItem("isCreated",e.isCreated),window.location.replace("condition.html"),toScrollTop()},resetRecipes:function(){this.isShowBox=!0},recipesList:function(e,t,o){console.log(e,t,o),window.location.href="recipelist.html?recipesId="+e+"&recipesDate="+t},toIndex:function(){window.location.href="../index.html?id="+openIdItem}}});